```html
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ICD-10 Quick Reference - Tra c·ª©u m√£ b·ªánh t·ª©c th√¨</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü©∫</text></svg>">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        medical: {
                            blue: '#1e40af',
                            green: '#059669',
                            red: '#dc2626'
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Import Maps for React & Libraries -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.309.0",
            "fuse.js": "https://esm.sh/fuse.js@7.0.0"
        }
    }
    </script>
    
    <!-- Service Worker Registration Script -->
    <script>
    (function() {
        // Dynamic Manifest
        const manifest = {
            "name": "ICD-10 Quick Reference",
            "short_name": "ICD-10",
            "description": "Tra c·ª©u m√£ b·ªánh ICD-10 nhanh ch√≥ng, ch√≠nh x√°c",
            "start_url": ".",
            "display": "standalone",
            "background_color": "#ffffff",
            "theme_color": "#1e40af",
            "icons": [
                {
                    "src": "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%231e40af'/><text x='50' y='70' font-family='Arial' font-size='60' text-anchor='middle' fill='white'>ü©∫</text></svg>",
                    "sizes": "192x192",
                    "type": "image/svg+xml"
                }
            ]
        };
        
        const blob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(blob);
        
        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = manifestURL;
        document.head.appendChild(link);
        
        // Virtual Service Worker
        if ('serviceWorker' in navigator) {
            const swCode = `
                self.addEventListener('install', (event) => {
                    self.skipWaiting();
                });
                self.addEventListener('fetch', (event) => {
                    event.respondWith(fetch(event.request));
                });
            `;
            const swBlob = new Blob([swCode], {type: 'application/javascript'});
            const swURL = URL.createObjectURL(swBlob);
            
            navigator.serviceWorker.register(swURL, {scope: './'})
                .catch(console.error);
        }
    })();
    </script>
    
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
        }
        input, textarea {
            -webkit-user-select: text;
            user-select: text;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        @supports (-webkit-touch-callout: none) {
            .min-h-screen-ios {
                min-height: -webkit-fill-available;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen min-h-screen-ios">
    <div id="root" class="max-w-md mx-auto"></div>
    
    <script type="text/babel" data-type="module">
    import React, { useState, useEffect, useMemo, useCallback } from 'react';
    import { createRoot } from 'react-dom/client';
    import { Search, Heart, Clock, BookOpen, Copy, Star, Share2, Download, X, ChevronRight, Filter, Bookmark } from 'lucide-react';
    import Fuse from 'fuse.js';
    
    // ========== ICD-10 DATABASE ==========
    const icd10Database = [
        // Ch∆∞∆°ng X: B·ªánh h·ªá h√¥ h·∫•p (J00-J99)
        { code: 'J00', name_vi: 'C·∫£m l·∫°nh th√¥ng th∆∞·ªùng', name_en: 'Common cold', chapter: 'X', chapter_name: 'B·ªánh h·ªá h√¥ h·∫•p', description: 'Vi√™m m≈©i h·ªçng c·∫•p do virus' },
        { code: 'J06', name_vi: 'Vi√™m h·ªçng c·∫•p', name_en: 'Acute pharyngitis', chapter: 'X', chapter_name: 'B·ªánh h·ªá h√¥ h·∫•p', description: 'Vi√™m c·∫•p t√≠nh v√πng h·ªçng' },
        { code: 'J20', name_vi: 'Vi√™m ph·∫ø qu·∫£n c·∫•p', name_en: 'Acute bronchitis', chapter: 'X', chapter_name: 'B·ªánh h·ªá h√¥ h·∫•p', description: 'Vi√™m c·∫•p t√≠nh ph·∫ø qu·∫£n' },
        { code: 'J30.3', name_vi: 'Vi√™m m≈©i d·ªã ·ª©ng', name_en: 'Allergic rhinitis', chapter: 'X', chapter_name: 'B·ªánh h·ªá h√¥ h·∫•p', description: 'Vi√™m m≈©i do d·ªã ·ª©ng' },
        
        // Ch∆∞∆°ng I: B·ªánh nhi·ªÖm tr√πng (A00-B99)
        { code: 'A09', name_vi: 'Vi√™m d·∫° d√†y ru·ªôt do nhi·ªÖm khu·∫©n', name_en: 'Infectious gastroenteritis', chapter: 'I', chapter_name: 'B·ªánh nhi·ªÖm tr√πng', description: 'Ti√™u ch·∫£y nhi·ªÖm tr√πng' },
        { code: 'B34.9', name_vi: 'Nhi·ªÖm virus kh√¥ng x√°c ƒë·ªãnh', name_en: 'Viral infection, unspecified', chapter: 'I', chapter_name: 'B·ªánh nhi·ªÖm tr√πng' },
        
        // Ch∆∞∆°ng IX: B·ªánh h·ªá tu·∫ßn ho√†n (I00-I99)
        { code: 'I10', name_vi: 'TƒÉng huy·∫øt √°p nguy√™n ph√°t', name_en: 'Essential hypertension', chapter: 'IX', chapter_name: 'B·ªánh h·ªá tu·∫ßn ho√†n', description: 'Cao huy·∫øt √°p' },
        { code: 'I25.1', name_vi: 'B·ªánh tim thi·∫øu m√°u c·ª•c b·ªô', name_en: 'Atherosclerotic heart disease', chapter: 'IX', chapter_name: 'B·ªánh h·ªá tu·∫ßn ho√†n' },
        
        // Ch∆∞∆°ng XI: B·ªánh h·ªá ti√™u h√≥a (K00-K93)
        { code: 'K29', name_vi: 'Vi√™m d·∫° d√†y t√° tr√†ng', name_en: 'Gastroduodenitis', chapter: 'XI', chapter_name: 'B·ªánh h·ªá ti√™u h√≥a', description: 'Vi√™m ni√™m m·∫°c d·∫° d√†y' },
        { code: 'K35', name_vi: 'Vi√™m ru·ªôt th·ª´a c·∫•p', name_en: 'Acute appendicitis', chapter: 'XI', chapter_name: 'B·ªánh h·ªá ti√™u h√≥a' },
        
        // Ch∆∞∆°ng XIII: B·ªánh h·ªá c∆° x∆∞∆°ng kh·ªõp (M00-M99)
        { code: 'M54', name_vi: 'ƒêau th·∫Øt l∆∞ng', name_en: 'Dorsalgia', chapter: 'XIII', chapter_name: 'B·ªánh h·ªá c∆° x∆∞∆°ng kh·ªõp', description: 'ƒêau v√πng l∆∞ng' },
        { code: 'M47', name_vi: 'Tho√°i h√≥a c·ªôt s·ªëng', name_en: 'Spondylosis', chapter: 'XIII', chapter_name: 'B·ªánh h·ªá c∆° x∆∞∆°ng kh·ªõp' },
        
        // Ch∆∞∆°ng IV: B·ªánh n·ªôi ti·∫øt (E00-E90)
        { code: 'E11', name_vi: 'ƒê√°i th√°o ƒë∆∞·ªùng type 2', name_en: 'Type 2 diabetes mellitus', chapter: 'IV', chapter_name: 'B·ªánh n·ªôi ti·∫øt', description: 'Ti·ªÉu ƒë∆∞·ªùng type 2' },
        { code: 'E04', name_vi: 'B∆∞·ªõu gi√°p kh√¥ng ƒë·ªôc', name_en: 'Nontoxic goiter', chapter: 'IV', chapter_name: 'B·ªánh n·ªôi ti·∫øt' },
        
        // Ch∆∞∆°ng XVIII: Tri·ªáu ch·ª©ng (R00-R99)
        { code: 'R51', name_vi: 'ƒêau ƒë·∫ßu', name_en: 'Headache', chapter: 'XVIII', chapter_name: 'Tri·ªáu ch·ª©ng' },
        { code: 'R05', name_vi: 'Ho', name_en: 'Cough', chapter: 'XVIII', chapter_name: 'Tri·ªáu ch·ª©ng' },
        { code: 'R50', name_vi: 'S·ªët kh√¥ng r√µ nguy√™n nh√¢n', name_en: 'Fever of unknown origin', chapter: 'XVIII', chapter_name: 'Tri·ªáu ch·ª©ng' },
    ];
    
    // Chapter data
    const chapters = [
        { id: 'X', name: 'B·ªánh h·ªá h√¥ h·∫•p', count: 4, color: 'bg-blue-100', textColor: 'text-blue-800' },
        { id: 'I', name: 'B·ªánh nhi·ªÖm tr√πng', count: 2, color: 'bg-red-100', textColor: 'text-red-800' },
        { id: 'IX', name: 'B·ªánh h·ªá tu·∫ßn ho√†n', count: 2, color: 'bg-purple-100', textColor: 'text-purple-800' },
        { id: 'XI', name: 'B·ªánh h·ªá ti√™u h√≥a', count: 2, color: 'bg-green-100', textColor: 'text-green-800' },
        { id: 'XIII', name: 'B·ªánh h·ªá c∆° x∆∞∆°ng kh·ªõp', count: 2, color: 'bg-yellow-100', textColor: 'text-yellow-800' },
        { id: 'IV', name: 'B·ªánh n·ªôi ti·∫øt', count: 2, color: 'bg-pink-100', textColor: 'text-pink-800' },
        { id: 'XVIII', name: 'Tri·ªáu ch·ª©ng', count: 3, color: 'bg-gray-100', textColor: 'text-gray-800' },
    ];
    
    // ========== MAIN APP COMPONENT ==========
    function App() {
        const [searchQuery, setSearchQuery] = useState('');
        const [favorites, setFavorites] = useState(() => {
            const saved = localStorage.getItem('icd10_favorites');
            return saved ? JSON.parse(saved) : ['J00', 'I10', 'K29'];
        });
        const [history, setHistory] = useState(() => {
            const saved = localStorage.getItem('icd10_history');
            return saved ? JSON.parse(saved) : [];
        });
        const [activeView, setActiveView] = useState('search'); // search, chapters, favorites, history
        const [selectedCode, setSelectedCode] = useState(null);
        const [recentSearches, setRecentSearches] = useState([]);
        
        // Configure Fuse.js for fuzzy search
        const fuse = useMemo(() => new Fuse(icd10Database, {
            keys: ['code', 'name_vi', 'name_en', 'description'],
            threshold: 0.3,
            includeScore: true,
            ignoreLocation: true,
        }), []);
        
        // Search results
        const searchResults = useMemo(() => {
            if (!searchQuery.trim()) {
                return recentSearches.slice(0, 5);
            }
            
            const results = fuse.search(searchQuery);
            return results.map(result => result.item);
        }, [searchQuery, fuse, recentSearches]);
        
        // Filter by chapter
        const codesByChapter = useMemo(() => {
            const grouped = {};
            icd10Database.forEach(item => {
                if (!grouped[item.chapter]) {
                    grouped[item.chapter] = [];
                }
                grouped[item.chapter].push(item);
            });
            return grouped;
        }, []);
        
        // Save favorites to localStorage
        useEffect(() => {
            localStorage.setItem('icd10_favorites', JSON.stringify(favorites));
        }, [favorites]);
        
        // Save history to localStorage
        useEffect(() => {
            localStorage.setItem('icd10_history', JSON.stringify(history));
        }, [history]);
        
        // Handle code selection
        const handleSelectCode = useCallback((code) => {
            setSelectedCode(code);
            
            // Add to history
            const codeData = icd10Database.find(item => item.code === code.code);
            if (codeData) {
                const newHistory = [
                    codeData,
                    ...history.filter(item => item.code !== codeData.code).slice(0, 19)
                ];
                setHistory(newHistory);
                
                // Add to recent searches
                setRecentSearches(prev => [
                    codeData,
                    ...prev.filter(item => item.code !== codeData.code).slice(0, 4)
                ]);
            }
        }, [history]);
        
        // Toggle favorite
        const toggleFavorite = useCallback((code) => {
            setFavorites(prev => {
                if (prev.includes(code)) {
                    return prev.filter(item => item !== code);
                } else {
                    return [...prev, code];
                }
            });
        }, []);
        
        // Copy code to clipboard
        const copyToClipboard = (code) => {
            navigator.clipboard.writeText(code);
            // Show toast (simplified)
            alert(`ƒê√£ sao ch√©p m√£: ${code}`);
        };
        
        // Share App as APK
        const shareApp = () => {
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'application/vnd.android.package-archive' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ICD10-Quick-Reference.apk';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        };
        
        // Get favorite codes data
        const favoriteCodes = useMemo(() => 
            favorites.map(code => icd10Database.find(item => item.code === code)).filter(Boolean)
        , [favorites]);
        
        // ========== RENDER COMPONENTS ==========
        const SearchView = () => (
            <div className="space-y-4">
                <div className="relative">
                    <Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400" size={20} />
                    <input
                        type="text"
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                        placeholder="Nh·∫≠p m√£ ICD-10 ho·∫∑c tri·ªáu ch·ª©ng..."
                        className="w-full pl-12 pr-10 py-3 bg-white rounded-xl border border-gray-200 focus:border-medical-blue focus:ring-2 focus:ring-blue-100 outline-none"
                        autoFocus
                    />
                    {searchQuery && (
                        <button 
                            onClick={() => setSearchQuery('')}
                            className="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"
                        >
                            <X size={20} />
                        </button>
                    )}
                </div>
                
                {searchQuery.trim() ? (
                    <div className="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div className="p-3 border-b border-gray-100">
                            <h3 className="font-medium text-gray-700">K·∫øt qu·∫£ t√¨m ki·∫øm ({searchResults.length})</h3>
                        </div>
                        <div className="max-h-[60vh] overflow-y-auto">
                            {searchResults.map((item, index) => (
                                <CodeItem 
                                    key={item.code} 
                                    item={item} 
                                    isFavorite={favorites.includes(item.code)}
                                    onSelect={handleSelectCode}
                                    onToggleFavorite={toggleFavorite}
                                    onCopy={copyToClipboard}
                                />
                            ))}
                        </div>
                    </div>
                ) : (
                    <div className="space-y-6">
                        {/* Quick Stats */}
                        <div className="grid grid-cols-3 gap-3">
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center">
                                <div className="text-2xl font-bold text-medical-blue">{icd10Database.length}</div>
                                <div className="text-sm text-gray-600 mt-1">M√£ b·ªánh</div>
                            </div>
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center">
                                <div className="text-2xl font-bold text-medical-green">{favorites.length}</div>
                                <div className="text-sm text-gray-600 mt-1">Y√™u th√≠ch</div>
                            </div>
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center">
                                <div className="text-2xl font-bold text-medical-red">{history.length}</div>
                                <div className="text-sm text-gray-600 mt-1">ƒê√£ tra</div>
                            </div>
                        </div>
                        
                        {/* Recent Searches */}
                        {recentSearches.length > 0 && (
                            <div className="bg-white rounded-xl shadow-sm border border-gray-100">
                                <div className="p-3 border-b border-gray-100 flex justify-between items-center">
                                    <h3 className="font-medium text-gray-700">Tra c·ª©u g·∫ßn ƒë√¢y</h3>
                                    <Clock size={18} className="text-gray-400" />
                                </div>
                                <div>
                                    {recentSearches.map((item) => (
                                        <CodeItem 
                                            key={item.code} 
                                            item={item} 
                                            isFavorite={favorites.includes(item.code)}
                                            onSelect={handleSelectCode}
                                            onToggleFavorite={toggleFavorite}
                                            onCopy={copyToClipboard}
                                        />
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                )}
            </div>
        );
        
        const ChaptersView = () => (
            <div className="space-y-4">
                <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                    <h3 className="font-medium text-gray-700 mb-3">Duy·ªát theo ch∆∞∆°ng ICD-10</h3>
                    <p className="text-sm text-gray-600">Ch·ªçn ch∆∞∆°ng ƒë·ªÉ xem danh s√°ch m√£ b·ªánh</p>
                </div>
                
                <div className="space-y-3">
                    {chapters.map((chapter) => (
                        <button
                            key={chapter.id}
                            onClick={() => {
                                const chapterCodes = codesByChapter[chapter.id] || [];
                                setSelectedCode({ type: 'chapter', id: chapter.id, name: chapter.name, codes: chapterCodes });
                            }}
                            className="w-full bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center hover:bg-gray-50 active:bg-gray-100 transition-colors"
                        >
                            <div className="text-left">
                                <div className="flex items-center gap-2">
                                    <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${chapter.color} ${chapter.textColor}`}>
                                        <BookOpen size={16} />
                                    </div>
                                    <div>
                                        <div className="font-medium text-gray-900">Ch∆∞∆°ng {chapter.id}</div>
                                        <div className="text-sm text-gray-600">{chapter.name}</div>
                                    </div>
                                </div>
                            </div>
                            <div className="flex items-center gap-2">
                                <span className="text-sm text-gray-500">{chapter.count} m√£</span>
                                <ChevronRight size={18} className="text-gray-400" />
                            </div>
                        </button>
                    ))}
                </div>
            </div>
        );
        
        const FavoritesView = () => (
            <div className="space-y-4">
                <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                    <div className="flex items-center justify-between">
                        <div>
                            <h3 className="font-medium text-gray-700">M√£ y√™u th√≠ch</h3>
                            <p className="text-sm text-gray-600">C√°c m√£ b·∫°n ƒë√£ ƒë√°nh d·∫•u</p>
                        </div>
                        <Heart size={20} className="text-red-500 fill-red-500" />
                    </div>
                </div>
                
                {favoriteCodes.length > 0 ? (
                    <div className="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div className="max-h-[70vh] overflow-y-auto">
                            {favoriteCodes.map((item) => (
                                <CodeItem 
                                    key={item.code} 
                                    item={item} 
                                    isFavorite={true}
                                    onSelect={handleSelectCode}
                                    onToggleFavorite={toggleFavorite}
                                    onCopy={copyToClipboard}
                                />
                            ))}
                        </div>
                    </div>
                ) : (
                    <div className="bg-white p-8 rounded-xl shadow-sm border border-gray-100 text-center">
                        <Heart size={48} className="mx-auto text-gray-300 mb-4" />
                        <h3 className="font-medium text-gray-700 mb-2">Ch∆∞a c√≥ m√£ y√™u th√≠ch</h3>
                        <p className="text-gray-500">Nh·∫•n v√†o bi·ªÉu t∆∞·ª£ng ‚ô° ƒë·ªÉ th√™m m√£ v√†o y√™u th√≠ch</p>
                    </div>
                )}
            </div>
        );
        
        const HistoryView = () => (
            <div className="space-y-4">
                <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                    <div className="flex items-center justify-between">
                        <div>
                            <h3 className="font-medium text-gray-700">L·ªãch s·ª≠ tra c·ª©u</h3>
                            <p className="text-sm text-gray-600">C√°c m√£ b·∫°n ƒë√£ t√¨m g·∫ßn ƒë√¢y</p>
                        </div>
                        <Clock size={20} className="text-gray-500" />
                    </div>
                </div>
                
                {history.length > 0 ? (
                    <div className="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div className="max-h-[70vh] overflow-y-auto">
                            {history.map((item, index) => (
                                <CodeItem 
                                    key={`${item.code}-${index}`} 
                                    item={item} 
                                    isFavorite={favorites.includes(item.code)}
                                    onSelect={handleSelectCode}
                                    onToggleFavorite={toggleFavorite}
                                    onCopy={copyToClipboard}
                                />
                            ))}
                        </div>
                    </div>
                ) : (
                    <div className="bg-white p-8 rounded-xl shadow-sm border border-gray-100 text-center">
                        <Clock size={48} className="mx-auto text-gray-300 mb-4" />
                        <h3 className="font-medium text-gray-700 mb-2">Ch∆∞a c√≥ l·ªãch s·ª≠</h3>
                        <p className="text-gray-500">B·∫Øt ƒë·∫ßu tra c·ª©u m√£ ICD-10 ƒë·ªÉ xem l·ªãch s·ª≠ ·ªü ƒë√¢y</p>
                    </div>
                )}
            </div>
        );
        
        const CodeItem = ({ item, isFavorite, onSelect, onToggleFavorite, onCopy }) => (
            <div className="p-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 active:bg-gray-100 transition-colors">
                <div className="flex justify-between items-start gap-3">
                    <button 
                        onClick={() => onSelect(item)}
                        className="text-left flex-1"
                    >
                        <div className="flex items-center gap-2 mb-1">
                            <span className="font-bold text-medical-blue text-lg">{item.code}</span>
                            {isFavorite && <Star size={14} className="text-yellow-500 fill-yellow-500" />}
                        </div>
                        <div className="font-medium text-gray-900 mb-1">{item.name_vi}</div>
                        <div className="text-sm text-gray-600 mb-2">{item.name_en}</div>
                        {item.description && (
                            <div className="text-sm text-gray-500">{item.description}</div>
                        )}
                        <div className="flex items-center gap-2 mt-2">
                            <span className="text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded-full">
                                Ch∆∞∆°ng {item.chapter}: {item.chapter_name}
                            </span>
                        </div>
                    </button>
                    
                    <div className="flex flex-col gap-2">
                        <button
                            onClick={() => onToggleFavorite(item.code)}
                            className={`p-2 rounded-lg ${isFavorite ? 'bg-red-50 text-red-600' : 'bg-gray-100 text-gray-500'}`}
                        >
                            <Heart size={18} className={isFavorite ? 'fill-red-600' : ''} />
                        </button>
                        <button
                            onClick={() => onCopy(item.code)}
                            className="p-2 rounded-lg bg-gray-100 text-gray-500"
                        >
                            <Copy size={18} />
                        </button>
                    </div>
                </div>
            </div>
        );
        
        const CodeDetailView = ({ code }) => {
            if (!code) return null;
            
            if (code.type === 'chapter') {
                return (
                    <div className="fixed inset-0 bg-white z-50 p-4 overflow-y-auto">
                        <div className="sticky top-0 bg-white pb-4 border-b border-gray-200">
                            <div className="flex items-center justify-between mb-4">
                                <button 
                                    onClick={() => setSelectedCode(null)}
                                    className="p-2 rounded-lg bg-gray-100"
                                >
                                    <ChevronRight size={20} className="rotate-180" />
                                </button>
                                <h2 className="text-lg font-bold text-gray-900">Ch∆∞∆°ng {code.id}: {code.name}</h2>
                                <div className="w-10"></div>
                            </div>
                        </div>
                        
                        <div className="mt-4">
                            {code.codes.map((item) => (
                                <CodeItem 
                                    key={item.code} 
                                    item={item} 
                                    isFavorite={favorites.includes(item.code)}
                                    onSelect={handleSelectCode}
                                    onToggleFavorite={toggleFavorite}
                                    onCopy={copyToClipboard}
                                />
                            ))}
                        </div>
                    </div>
                );
            }
            
            const codeData = icd10Database.find(item => item.code === code.code) || code;
            
            return (
                <div className="fixed inset-0 bg-white z-50 p-4 overflow-y-auto">
                    <div className="sticky top-0 bg-white pb-4 border-b border-gray-200">
                        <div className="flex items-center justify-between mb-4">
                            <button 
                                onClick={() => setSelectedCode(null)}
                                className="p-2 rounded-lg bg-gray-100"
                            >
                                <ChevronRight size={20} className="rotate-180" />
                            </button>
                            <button
                                onClick={() => toggleFavorite(codeData.code)}
                                className={`p-2 rounded-lg ${favorites.includes(codeData.code) ? 'bg-red-50 text-red-600' : 'bg-gray-100 text-gray-500'}`}
                            >
                                <Heart size={20} className={favorites.includes(codeData.code) ? 'fill-red-600' : ''} />
                            </button>
                        </div>
                        
                        <div className="text-center mb-6">
                            <div className="text-4xl font-bold text-medical-blue mb-2">{codeData.code}</div>
                            <div className="text-xl font-bold text-gray-900 mb-2">{codeData.name_vi}</div>
                            <div className="text-lg text-gray-600">{codeData.name_en}</div>
                        </div>
                    </div>
                    
                    <div className="mt-6 space-y-6">
                        <div className="bg-gray-50 p-4 rounded-xl">
                            <h3 className="font-medium text-gray-700 mb-2">Th√¥ng tin chi ti·∫øt</h3>
                            <div className="space-y-3">
                                <div className="flex justify-between">
                                    <span className="text-gray-600">Ch∆∞∆°ng ICD-10:</span>
                                    <span className="font-medium">{codeData.chapter} - {codeData.chapter_name}</span>
                                </div>
                                {codeData.description && (
                                    <div>
                                        <div className="text-gray-600 mb-1">M√¥ t·∫£:</div>
                                        <div className="text-gray-900">{codeData.description}</div>
                                    </div>
                                )}
                            </div>
                        </div>
                        
                        <div className="grid grid-cols-2 gap-3">
                            <button
                                onClick={() => copyToClipboard(codeData.code)}
                                className="p-3 bg-blue-50 text-blue-700 rounded-xl flex flex-col items-center justify-center"
                            >
                                <Copy size={24} className="mb-2" />
                                <span className="text-sm font-medium">Sao ch√©p m√£</span>
                            </button>
                            <button
                                onClick={() => copyToClipboard(`${codeData.code} - ${codeData.name_vi}`)}
                                className="p-3 bg-green-50 text-green-700 rounded-xl flex flex-col items-center justify-center"
                            >
                                <Bookmark size={24} className="mb-2" />
                                <span className="text-sm font-medium">Sao ch√©p ƒë·∫ßy ƒë·ªß</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        return (
            <div className="min-h-screen bg-gray-50 pb-20">
                {/* Header */}
                <header className="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40">
                    <div className="p-4">
                        <div className="flex justify-between items-center mb-2">
                            <div>
                                <h1 className="text-xl font-bold text-gray-900">ICD-10 Quick Reference</h1>
                                <p className="text-sm text-gray-600">Tra c·ª©u m√£ b·ªánh t·ª©c th√¨</p>
                            </div>
                            <button
                                onClick={shareApp}
                                className="p-2 bg-medical-blue text-white rounded-lg"
                                title="Chia s·∫ª ·ª©ng d·ª•ng"
                            >
                                <Share2 size={20} />
                            </button>
                        </div>
                        
                        {/* Navigation Tabs */}
                        <div className="flex border-b border-gray-200 mt-4">
                            {[
                                { id: 'search', label: 'T√¨m ki·∫øm', icon: Search },
                                { id: 'chapters', label: 'Ch∆∞∆°ng', icon: BookOpen },
                                { id: 'favorites', label: 'Y√™u th√≠ch', icon: Heart },
                                { id: 'history', label: 'L·ªãch s·ª≠', icon: Clock },
                            ].map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveView(tab.id)}
                                    className={`flex-1 py-3 flex flex-col items-center justify-center ${activeView === tab.id ? 'text-medical-blue border-b-2 border-medical-blue' : 'text-gray-500'}`}
                                >
                                    <tab.icon size={20} className="mb-1" />
                                    <span className="text-xs font-medium">{tab.label}</span>
                                </button>
                            ))}
                        </div>
                    </div>
                </header>
                
                {/* Main Content */}
                <main className="p-4">
                    {activeView === 'search' && <SearchView />}
                    {activeView === 'chapters' && <ChaptersView />}
                    {activeView === 'favorites' && <FavoritesView />}
                    {activeView === 'history' && <HistoryView />}
                </main>
                
                {/* Footer */}
                <footer className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4">
                    <div className="max-w-md mx-auto">
                        <div className="flex justify-between items-center text-xs text-gray-500">
                            <div>
                                <div className="font-medium">{icd10Database.length} m√£ b·ªánh</div>
                                <div>D·ªØ li·ªáu offline</div>
                            </div>
                            <div className="text-right">
                                <div className="font-medium">D√†nh cho y t·∫ø</div>
                                <div>¬© 2024 ICD-10 Quick Reference</div>
                            </div>
                        </div>
                    </div>
                </footer>
                
                {/* Detail Modal */}
                {selectedCode && <CodeDetailView code={selectedCode} />}
            </div>
        );
    }
    
    // ========== RENDER REACT APP ==========
    const container = document.getElementById('root');
    const root = createRoot(container);
    root.render(<App />);
    </script>
</body>
</html>
```
